.nolist
.include "m328Pdef.inc"
.list

INICIO:
	LDI R16, 0b11111111
	OUT DDRB, R16
    LDI R16, 0b00000000

PRINCIPAL:
    CALL DECODIFICAR
    OUT PORTB, R0
    CALL ATRASO
	CALL INCREMENTAR
	RJMP PRINCIPAL

INCREMENTAR:
	CPI R16, 9
	BREQ ZERAR
		INC R16
		RET
	ZERAR:
		LDI R16, 0
		RET

ATRASO:
    LDI R17, 82 
    L17:
        LDI R18, 255
    L18:
        LDI R19, 255
    L19:
        DEC R19
        BRNE L19
        DEC R18
        BRNE L18
        DEC R17
        BRNE L17
    RET

DECODIFICAR:
    LDI ZH, HIGH(TABELA << 1)
    LDI ZL, LOW(TABELA << 1)
    ADD ZL, R16
    BRCC LEITURA
    INC ZH
    LEITURA:
        LPM R0, Z
    RET

TABELA:
	.db 0b00111111, 0b00000110, 0b01011011, 0b01001111, 0b01100110, 0b01101101, 0b01111101, 0b00000111, 0b01111111, 0b01101111
